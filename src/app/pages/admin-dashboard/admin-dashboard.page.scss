/* =================================================================================== */
/* admin-dashboard.page.scss                                                           */
/*                                                                                     */
/* Ajustes finales para:                                                                */
/*  - Sticky (versión móvil): el bloque de filtros no “flote” sino que se pegue al top. */
/*  - Desktop: recuperar el gutter horizontal para que los inputs no queden pegados.    */
/*  - Alinear correctamente el pop-over de ion-select “Filtrar por rol”.               */
/*                                                                                     */
/* Se apoya en las Custom Properties definidas en global.scss:                         */
/*   --gray-1    (gris muy claro, fondo general)                                       */
/*   --gray-2    (gris claro, fondos de tarjetas/inputs)                               */
/*   --gray-3    (gris medio, bordes y separadores)                                    */
/*   --white     (blanco puro)                                                         */
/*   --black     (texto principal)                                                     */
/*   --primary   (azul “acción”)                                                       */
/*   --error     (rojo para eliminar)                                                  */
/* =================================================================================== */

/* ================================================================= */
/* 1) ADMIN CONTENT (NO MODIFICAR)                                   */
/* ================================================================= */
.admin-content {
  /* Dejamos que ion-content maneje el scroll vertical completo */
  padding: 0;
  background: var(--gray-1);
}

/* ================================================================= */
/* 2) BLOQUE DE FILTROS Y BÚSQUEDA                                     */
/* ================================================================= */
.dashboard-controls {
  background: var(--white);
  padding: 12px 16px;
  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.05);
  margin-bottom: 8px;
  top: 0;
  z-index: 1000;

  /* 2.2) Alinear verticalmente todos los <ion-col> en la fila       */
  /*      para centrar el botón “Actualizar” con respecto a los inputs */
  ion-row {
    display: flex;
    align-items: center;

    /* 2.3) Restauramos el gutter horizontal original de IonGrid para desktop */
    /*      (por defecto Ionic usa 16px entre columnas; aquí nos aseguramos  */
    /*      de no “pisar” ese gutter).                                         */
    --ion-grid-gutter-width: 16px;
  }
}

/* —————————————————————————————————————————————————————————————————— */
/* 2.4) ion-col internamente ya trae su padding lateral, así que si   */
/*      queremos más separación en desktop, 16px suele bastar.       */
/*      No añadimos margin extra a cada ion-col para no romper el    */
/*      grid responsive.                                              */
/* —————————————————————————————————————————————————————————————————— */

/* ================================================================= */
/* 3) ESTILOS PARA LOS ion-item (FILTROS)                              */
/* ================================================================= */
.filter-item,
.search-item {
  /* 3.1) Fondo blanco (antes estaban grises) */
  --background: var(--white) !important;

  /* 3.2) Borde gris medio y esquinas redondeadas */
  --border-radius: 8px !important;
  border: 1px solid var(--gray-3);

  /* 3.3) Padding interno para que no queden pegados: */
  padding: 8px;
  /* 3.4) Margen vertical para separación en mobile */
  margin-top: 8px;
  margin-bottom: 8px;

  /* 3.5) Posicionamos relativo para ubicar la lupa dentro de .search-item */
  position: relative;
}

/* ————————————————————————————————————————————————————————————— */
/* 3.6) Etiqueta (“Filtrar por rol”, “Buscar”): color más tenue,    */
/*      fuente más pequeña                                          */
/* ————————————————————————————————————————————————————————————— */
.filter-item ion-label,
.search-item ion-label {
  color: var(--gray-3);
  font-size: 0.85rem;
}

/* ================================================================= */
/* 4) CENTRAR ICONO DE LUPA DENTRO DE “Buscar”                         */
/* ================================================================= */
.search-item .search-icon {
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 1.2rem;
  color: var(--gray-3);
}

/* ================================================================= */
/* 5) Quitar la “línea inferior” (underline) de los ion-inputs         */
/*    dentro de los ion-item de filtro                                 */
/* ================================================================= */
.filter-item ion-input,
.search-item ion-input {
  /* Se anula la animación de highlight y se elimina cualquier border */
  --highlight-width: 0;
  --highlight-color-focused: transparent;
  --border-width: 0;
  background: transparent;
}

/* En algunos navegadores el “autofill” pinta un fondo gris, así que: */
.filter-item ion-input .native-input,
.search-item ion-input .native-input {
  background: transparent !important;
}

/* ================================================================= */
/* 6) BOTÓN “Actualizar”                                              */
/* ================================================================= */
.refresh-button {
  --background: var(--primary) !important;
  --color: var(--white) !important;
  --border-radius: 8px !important;
  margin-top: 0; /* Centrado vertical con align-items en ion-row */
  margin-bottom: 8px;
  height: 44px;
}

@media (min-width: 768px) {
  .refresh-button {
    width: 100%;
  }
}

/* ================================================================= */
/* 7) CONTENEDOR DE TABLA Y TARJETAS                                   */
/*    (NO CAMBIAR MÁS DE LO NECESARIO)                                 */
/* ================================================================= */
.table-scroll-container {
  overflow-x: auto; /* Solo scroll horizontal si hace falta */
  overflow-y: visible; /* No generar scroll vertical extra */
  padding: 0 16px;
  max-width: 100%;
}

/* ————————————————————————————————————————————————————————————————————— */
/* 7.1) TABLA – VISIBLE SOLO EN DESKTOP                                     */
/* ————————————————————————————————————————————————————————————————————— */
.desktop-only {
  display: block;
}

.mobile-only {
  display: none;
}

.user-table {
  width: 100%;
  border-collapse: collapse;
  min-width: 600px; /* Forzar ancho mínimo para que aparezca scroll si faltan columnas */
}

.user-table th,
.user-table td {
  padding: 12px 8px;
  text-align: left;
}

.user-table thead .table-header {
  background: var(--primary);
}

.user-table thead th {
  color: var(--white);
  font-weight: 600;
  font-size: 0.95rem;
  position: relative;
  cursor: pointer;
}

.user-table thead th ion-icon {
  font-size: 0.8rem;
  margin-left: 4px;
  vertical-align: middle;
}

.user-table tbody .table-row:nth-child(even) {
  background: var(--gray-2);
}

.user-table tbody .table-row:nth-child(odd) {
  background: var(--white);
}

.user-table td {
  border-bottom: 1px solid var(--gray-3);
  font-size: 0.9rem;
}

.actions-col {
  width: 100px;
  text-align: center;
}

.actions-col ion-button {
  font-size: 1.1rem;
  --padding-start: 0;
  --padding-end: 0;
  color: var(--primary);
}

.actions-col ion-button[color="danger"] {
  color: var(--error);
}

/* ————————————————————————————————————————————————————————————————————— */
/* 7.2) TARJETAS – VISIBLE SOLO EN MÓVIL                                     */
/* ————————————————————————————————————————————————————————————————————— */
.user-card-list {
  padding: 0 16px;
  max-width: 100%;
}

.user-card {
  margin-bottom: 16px;
  border-radius: 12px;
  overflow: hidden;
  background: var(--white);
  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.05);
}

.user-card .card-row {
  display: flex;
  justify-content: space-between;
  padding: 8px 12px;
  flex-wrap: wrap;
}

.user-card .card-label {
  font-weight: 500;
  color: var(--gray-dark);
  font-size: 0.85rem;
  width: 40%;
  min-width: 120px;
}

.user-card .card-value {
  font-size: 0.9rem;
  color: var(--black);
  width: 55%;
}

.user-card .card-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  padding: 8px 12px;
  border-top: 1px solid var(--gray-3);
}

.user-card .card-actions ion-button {
  font-size: 0.9rem;
  --padding-start: 6px;
  --padding-end: 6px;
  --padding-top: 4px;
  --padding-bottom: 4px;
}

/* ————————————————————————————————————————————————————————————————————— */
/* 7.3) PAGINACIÓN                                                              */
/* ————————————————————————————————————————————————————————————————————— */
.pagination-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin: 16px 0 32px;
  gap: 8px;
}

.page-size-control {
  width: 80%;
  max-width: 300px;
}

.page-navigation {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 0.9rem;
  color: var(--gray-dark);
}

.pagination-container ion-button {
  /* Botones “chevron” más pequeños */
  --padding-start: 0;
  --padding-end: 0;
  font-size: 1.2rem;
}

/* ————————————————————————————————————————————————————————————————————— */
/* 7.4) “NO HAY DATOS”                                                            */
/* ————————————————————————————————————————————————————————————————————— */
.no-data {
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: 60px;
  color: var(--gray-dark);
  font-size: 1rem;
}

.no-data ion-icon {
  font-size: 2rem;
  margin-bottom: 12px;
}

/* ————————————————————————————————————————————————————————————————————— */
/* 7.5) OVERLAY DE CARGA                                                        */
/* ————————————————————————————————————————————————————————————————————— */
.loading-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.85);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
}

/* ————————————————————————————————————————————————————————————————————— */
/* 7.6) ALINEAR EL POPOVER de ion-select (“Filtrar por rol”)                     */
/*                                                                                 */
/*   Ahora la lista de opciones sale alineada justo debajo del campo,             */
/*   sin desbordar lateralmente.                                                   */
/* ————————————————————————————————————————————————————————————————————— */
ion-select-interface-popover {
  margin-top: 4px !important;

  /* Si el ancho fuera mayor que el del input padre, lo forzamos a que quepa */
  /* de manera centrada respecto al input.                                     */
  .popover-content {
    /* Hacemos que el popover coincida con el ancho del ion-item padre (± 32px) */
    width: auto !important;
    min-width: calc(100% - 32px) !important;
    margin: 0 auto !important;
  }
}

/* =============================================== */
/* 8) BREAKPOINTS RESPONSIVE: mostrar/ocultar bloques */
/* =============================================== */
@media (max-width: 767px) {
  .desktop-only {
    display: none;
  }
  .mobile-only {
    display: block;
  }

  .dashboard-controls {
    padding: 8px 12px;
  }

  /* En móvil, las card-rows apilan verticalmente si no caben */
  .user-card .card-row {
    flex-direction: column;
    gap: 4px;
  }

  /* Ajuste: no mostrar scroll vertical extra en el contenedor */
  .table-scroll-container {
    padding: 0 8px;
  }
}

@media (min-width: 768px) {
  .desktop-only {
    display: block;
  }
  .mobile-only {
    display: none;
  }
}
